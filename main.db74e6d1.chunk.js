(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(1),n(3);var r={sendWindowMessage:function(e,t){},onWindowMessage:function(e){},stateChangedGlobalDebouncedViewUpdate:function(){}}},11:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return g}));var r=n(1),s=n.n(r),i=n(3),a=n(2),o=n(4),c=n(10);function u(e){return Object.keys(e).map((function(t){return{k:t,v:e[t]}}))}function d(e){return Object.keys(e).map((function(t){return{k:t,v:e[t]}}))}var l=function(){function e(t){var n=this;Object(a.a)(this,e),this.getKey=t,this.d={},this.refD={},this.items=[],this.onItemTouched={},this.onAdded={},this.onRemoved={};for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];s&&s.length&&s.forEach((function(e){var t=n.getKey(e);n.d[t]=e,n.refD[t]={r:e},n.items.push(n.refD[t])}))}return Object(o.a)(e,[{key:"getOrAddItem",value:function(e,t){var n=this.d[e];return n||t&&(n=t(),this.d[e]=n,this.refD[e]={r:n},this.items.push(this.refD[e]),this.raiseItemTouched(this.onAdded,this.refD[e])),n}},{key:"clear",value:function(){var e=this;this.items.filter((function(e){return!!e})).forEach((function(t){e.removeItem(e.getKey(t.r))}))}},{key:"raiseItemTouched",value:function(e,t){u(e).forEach((function(e){e.v(t)})),e!==this.onItemTouched&&u(this.onItemTouched).forEach((function(e){e.v(t)}))}},{key:"addOrUpdateItem",value:function(e){var t=this.getKey(e),n=this.d[t];return n?(this.d[t]=e,this.refD[t].r=e,this.raiseItemTouched(this.onItemTouched,this.refD[t]),n=e):(n=e,this.d[t]=n,this.refD[t]={r:n},this.items.push(this.refD[t]),this.raiseItemTouched(this.onAdded,this.refD[t])),n}},{key:"removeItem",value:function(e){if(this.d[e]){var t=this.refD[e],n=this.items.indexOf(this.refD[e]);n>=0&&this.items.splice(n,1),delete this.d[e],delete this.refD[e],this.raiseItemTouched(this.onRemoved,t)}}}]),e}(),h=function(){function e(t){var n=this;Object(a.a)(this,e),this.getKey=t,this.d={},this.refD={},this.items=[],this.onItemTouched={},this.onAdded={},this.onRemoved={};for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];s&&s.length&&s.forEach((function(e){var t=n.getKey(e);n.d[t]=e,n.refD[t]={r:e},n.items.push(n.refD[t])}))}return Object(o.a)(e,[{key:"getOrAddItem",value:function(e,t){var n=this.d[e];return n||t&&(n=t(),this.d[e]=n,this.refD[e]={r:n},this.items.push(this.refD[e]),this.raiseItemTouched(this.onAdded,this.refD[e])),n}},{key:"clear",value:function(){var e=this;this.items.filter((function(e){return!!e})).forEach((function(t){e.removeItem(e.getKey(t.r))}))}},{key:"raiseItemTouched",value:function(e,t){d(e).forEach((function(e){e.v(t)})),e!==this.onItemTouched&&d(this.onItemTouched).forEach((function(e){e.v(t)}))}},{key:"addOrUpdateItem",value:function(e){var t=this.getKey(e),n=this.d[t];return n?(this.d[t]=e,this.refD[t].r=e,this.raiseItemTouched(this.onItemTouched,this.refD[t])):(n=e,this.d[t]=n,this.refD[t]={r:n},this.items.push(this.refD[t]),this.raiseItemTouched(this.onAdded,this.refD[t])),n}},{key:"removeItem",value:function(e){if(this.d[e]){var t=this.refD[e],n=this.items.indexOf(this.refD[e]);n>=0&&this.items.splice(n,1),delete this.d[e],delete this.refD[e],this.raiseItemTouched(this.onRemoved,t)}}}]),e}(),p=function e(t,n,r){var s=this;Object(a.a)(this,e),this.timeout=t,this.action=n,this.maxTime=r,this.tmr=0,this.lastSceduleStart=0,this.schedule=function(){s.lastSceduleStart||(s.lastSceduleStart=(new Date).getTime());var e=(new Date).getTime();s.lastSceduleStart&&s.maxTime&&e-s.lastSceduleStart>s.maxTime||(s.cancel(),s.tmr=setTimeout((function(){s.tmr=0,s.lastSceduleStart=0,s.action()}),s.timeout))},this.cancel=function(){s.tmr&&(clearTimeout(s.tmr),s.tmr=0)}},f=new l((function(e){return e.raw}));function m(e){return e.startsWith("/")||(e="/"+e),e.indexOf("?")<0&&(e+="?"),e.indexOf("#")<0&&(e+="#"),f.getOrAddItem(e,(function(){var t=e.split("#"),n=[t[0],t.slice(1).join("#")],r=function(e){e.indexOf("?")<0&&(e+="?");var t=e.split("?"),n=[t[0],t.slice(1).join("?")];return{raw:e,name:n[0],queryRaw:n[1],qyeryVals:(n[1]||"").split("&").reduce((function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")||"",e}),{})}};return{raw:e,path:r(n[0]),hash:r(n[1])}}))}var g=function(){function e(t,n,r){var o=this;Object(a.a)(this,e),this.getValueFunc=t,this.resourceIdent=n,this.resTs=void 0,this.onResolved=void 0,this.error=void 0,this.loading=!1,this.valValid=!1,this._val=void 0,this.setRes=function(e){o.loading=!1,o.error=void 0,o._val=e,o.valValid=!0},this.waitForLoad=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.res;case 1:if(!o.loading){e.next=6;break}return e.next=4,new Promise((function(e){setTimeout((function(){return e(void 0)}),300)}));case 4:e.next=1;break;case 6:return e.abrupt("return",Promise.resolve(o));case 7:case"end":return e.stop()}}),e)}))),this.waitForRes=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.waitForLoad();case 2:if(!o.res){e.next=4;break}return e.abrupt("return",Promise.resolve(o.res));case 4:return e.abrupt("return",Promise.reject(o.error||"Undefined after waiting for load:: "+o.resourceIdent));case 5:case"end":return e.stop()}}),e)}))),this.getAsync=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&o.reset(),o.res,e.next=4,o.waitForLoad();case 4:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.reset=function(e){if(o.valValid=!1,o.error=void 0,o._val=void 0,o.resTs=void 0,o.loading=!1,e){o.res;o.waitForLoad().then((function(){e(o)}))}o.onResolved(o)},this.onResolved=c.a.stateChangedGlobalDebouncedViewUpdate,r&&(this.onResolved=r)}return Object(o.a)(e,[{key:"res",get:function(){var e=this;if(!this.valValid&&!this.loading){this.loading=!0;try{this.getValueFunc().then((function(t){e.resTs=(new Date).getTime(),e.error=void 0,e._val=t,e.valValid=!0,e.loading=!1,e.onResolved(e)})).catch((function(t){e.error=t,e.loading=!1,e.onResolved(e)}))}catch(t){this.error=t,this.loading=!1,this.onResolved(this)}this.valValid=!0}return this._val}}]),e}()},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(2),s=n(4),i=n(8),a=n(7),o=n(5),c=n(11),u=n(10),d=n(17),l=n(0),h=[];function p(e,t){var n={snackno:h[0]&&h[0].snackno+1||1,snack:e};setTimeout((function(){var e=h.indexOf(n);e>=0&&h.splice(e,1),f.action()}),t||3e3),h.splice(0,0,n),f.action()}var f=new c.b(400,(function(){})),m=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.action=function(){e.forceUpdate()},u.a.stateChangedGlobalDebouncedViewUpdate=f.schedule,Object(d.a)()}},{key:"render",value:function(){var e=h[0];return Object(l.jsxs)(o.Fragment,{children:[this.props.children,e&&Object(l.jsx)("div",{className:"fadeout pageback border-all",style:{position:"fixed",zIndex:1,bottom:"10%",right:"10%",maxWidth:"300pt",overflowX:"visible",padding:16,borderRadius:3},children:e.snack},e.snackno)]})}}]),n}(o.Component)},15:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return j}));var r,s=n(6),i=n(8),a=n(7),o=n(1),c=n.n(o),u=n(2),d=n(4),l=n(3),h=n(5),p=n(20),f=n(13),m=n(17),g=(n(51),n(0));function v(e,t){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return r=e.sent,n&&n(void 0),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),n&&n(e.t0);case 11:return e.abrupt("return",Promise.resolve(void 0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(e){e.connected="Connection Open",e.connectionstatechange="connectionstatechange"}(r||(r={}));var w=function(){function t(n,s,i,a){var o=this;Object(u.a)(this,t),this.channel=n,this.isHost=s,this.keyhash=i,this.config={iceServers:[{urls:"stun:stun.1.google.com:19302"}]},this.pc=new RTCPeerConnection(this.config),this.dc=void 0,this.hostOffer="",this.peerOffer="",this.error=void 0,this.receivedMessages=[],this.sentMessages=[],this.allMessages=[],this.setError=function(e){o.error=e,o.logChange("PeerContainer::ERROR--",e)},this.changeListeners={},this.logChange=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(t=console).log.apply(t,["rtcPeer::cangestate::".concat(e)].concat(r)),Object.keys(o.changeListeners).forEach((function(t){o.changeListeners[t]("".concat(o.channel," ").concat(e||""))}))},this.onNewMessage=function(e){},this.createOffer=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=o.pc,t.next=3,o.pc.createOffer();case 3:return t.t1=t.sent,t.next=6,t.t0.setLocalDescription.call(t.t0,t.t1);case 6:return o.pc.onicecandidate=function(t){if(!t.candidate&&o.pc.localDescription){var n={keyhash:o.keyhash,offer:o.pc.localDescription.sdp};o.hostOffer=e.from(JSON.stringify(n)).toString("base64"),o.logChange("hostOffer--")}},o.logChange("hostOffer-- localDescription"),t.abrupt("return",Promise.resolve(1));case 9:case"end":return t.stop()}}),t)}))),o.setError);case 2:return o.logChange("hostOffer--handled"),t.abrupt("return",Promise.resolve(1));case 4:case"end":return t.stop()}}),t)}))),this.acceptHostOffer=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(Object(l.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===(n=JSON.parse(atob(t)))||void 0===n?void 0:n.offer)){e.next=14;break}return e.next=5,o.pc.setRemoteDescription({type:"offer",sdp:n.offer});case 5:return e.t0=o.pc,e.next=8,o.pc.createAnswer();case 8:return e.t1=e.sent,e.next=11,e.t0.setLocalDescription.call(e.t0,e.t1);case 11:o.pc.onicecandidate=function(e){!e.candidate&&o.pc.localDescription&&(o.peerOffer=btoa(JSON.stringify({offer:o.pc.localDescription.sdp,keyhash:o.keyhash})),o.logChange("peerOffer--"))},e.next=17;break;case 14:return alert("Invalid Key"),o.logChange("acceptedHostOffer localDescription Error Invalid offer",o.pc.connectionState),e.abrupt("return",Promise.resolve(1));case 17:e.next=24;break;case 19:return e.prev=19,e.t2=e.catch(0),alert("Invalid Key"),o.logChange("acceptedHostOffer localDescription Error",o.pc.connectionState,e.t2),e.abrupt("return",Promise.resolve(1));case 24:return o.logChange("acceptedHostOffer localDescription",o.pc.connectionState),e.abrupt("return",Promise.resolve(1));case 26:case"end":return e.stop()}}),e,null,[[0,19]])}))),o.setError);case 2:return o.logChange("acceptedHostOffer doHAndled"),e.abrupt("return",Promise.resolve(1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.acceptPeerOffer=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(Object(l.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===(n=JSON.parse(atob(t)))||void 0===n?void 0:n.offer)){e.next=9;break}return e.next=5,o.pc.setRemoteDescription({type:"answer",sdp:n.offer});case 5:return o.logChange("acceptPeerOffer as RemoteDescriptor--"),e.abrupt("return",Promise.resolve(1));case 9:return alert("Invalid Key"),o.logChange("acceptPeerOffer localDescription Error Invalid offer",o.pc.connectionState),e.abrupt("return",Promise.resolve(1));case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(0),alert("Invalid Key"),o.logChange("acceptPeerOffer localDescription Error",o.pc.connectionState,e.t0),e.abrupt("return",Promise.resolve(1));case 19:case"end":return e.stop()}}),e,null,[[0,14]])}))),o.setError);case 2:return o.logChange("peerAnser dohandled"),e.abrupt("return",Promise.resolve(1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendMessage=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v((function(){var e={ts:(new Date).getTime(),msg:t,sentFromHere:!0};return o.dc.send(t),o.sentMessages.splice(0,0,e),o.allMessages.splice(0,0,e),o.onNewMessage(e),Promise.resolve(1)}));case 2:return o.logChange("sendMessageDone",t),e.abrupt("return",Promise.resolve(1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a&&(this.changeListeners.onConnectionStateChanged=a),this.dc=this.pc.createDataChannel(this.channel,{negotiated:!0,id:0}),this.dc.onopen=function(){},this.dc.onmessage=function(e){var t={msg:e.data,sentFromHere:!1,ts:(new Date).getTime()};o.receivedMessages.splice(0,0,t),o.allMessages.splice(0,0,t),o.logChange("rec:>",e.data),o.onNewMessage(t)},this.pc.oniceconnectionstatechange=function(e){return o.logChange(o.pc.iceConnectionState)},this.pc.onconnectionstatechange=function(e){"connected"===o.pc.connectionState?o.logChange("connectionstatechange--".concat(r.connected),o.pc.connectionState):o.logChange("connectionstatechange--",o.pc.connectionState)},this.isHost&&this.createOffer()}return Object(d.a)(t,[{key:"isOpen",get:function(){return"open"===this.dc.readyState}}]),t}(),O={alignSelf:"stretch",borderRadius:3,margin:5,padding:7,marginTop:0};var j=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={hasPeerOffer:!1,runningTestTimer:0,showDetails:!0,manualMsgs:[],newMsg:""},e.sendAppMessage=function(t){e.props.peerSetup.sendMessage(JSON.stringify(t))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.peerSetup.onNewMessage=function(t){if(t.msg.startsWith("{")&&t.msg.endsWith("}"))try{var n=JSON.parse(t.msg);"manual"===n.type&&(n.raw=t,e.state.manualMsgs.splice(0,0,n),console.debug("Got APPMESSAGE!!",n,t.msg),e.forceUpdate())}catch(r){}},this.props.peerSetup.isHost&&(this.state.showDetails=!0),this.props.peerSetup.changeListeners.view=function(){return e.forceUpdate()}}},{key:"componentWillUnmount",value:function(){delete this.props.peerSetup.changeListeners.view}},{key:"render",value:function(){var e=this,t=this.props.peerSetup,n=t.isOpen,r=this.props.peerSetup.isHost,i="purple",a="indianred",o=function(e){return e.isHost?"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"#/host/").concat(e.hostOffer):"".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"#/peer/").concat(e.peerOffer)}(t);return!t.isHost&&t.hostOffer&&(this.state.hasPeerOffer=!0),Object(g.jsxs)("div",{className:"celllt",style:Object(s.a)(Object(s.a)({},O),this.props.style||{}),children:[Object(g.jsxs)("div",{className:"cellvl",style:Object(s.a)({flex:"0 1 auto",alignItems:"stretch",alignSelf:"stretch",justifyContent:"flex-start",maxWidth:"140pt"},this.props.widgetsStyle||{}),children:[n&&Object(g.jsx)("h2",{className:"selectable clickable ",onClick:function(){e.state.showDetails=!e.state.showDetails,e.setState(e.state)},style:{paddingRight:18},children:r?"Host":"Partner"}),n&&Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsx)(p.a,{style:{color:"darkcyan"},title:"".concat(this.state.runningTestTimer?"Stop Testing":"Start Testing"),onClick:function(){e.state.runningTestTimer?(clearInterval(e.state.runningTestTimer),e.state.runningTestTimer=0):e.state.runningTestTimer=setInterval((function(){t.sendMessage("".concat(r?"Host":"Partner"," message nr: ").concat(t.sentMessages.length))}),100),e.setState(e.state)}}),Object(g.jsxs)("div",{style:{color:i,padding:7},children:["# Sent: ",t.sentMessages.length]}),Object(g.jsxs)("div",{style:{color:a,padding:7},children:["# Received: ",t.receivedMessages.length]}),Object(g.jsx)("textarea",{style:{margin:10},rows:2,value:this.state.newMsg,onChange:function(t){e.state.newMsg=t.target.value,e.forceUpdate()},onKeyUp:function(t){if(console.debug("keyuphandler",t.keyCode,t.charCode),13==t.keyCode&&e.state.newMsg){var n={data:e.state.newMsg,type:"manual"};e.sendAppMessage(n),e.state.newMsg="",e.forceUpdate()}}})]}),Object(g.jsx)("div",{style:{flex:"0 1 auto",overflowY:"auto"},children:this.state.manualMsgs.map((function(e,t){return Object(g.jsx)("div",{style:{padding:10,color:e.raw.sentFromHere?i:a},children:e.data},e.raw.ts)}))}),Object(g.jsxs)("div",{className:t.isOpen?"good":"bad",style:{fontSize:"0.8em",textTransform:"capitalize"},children:[t.isOpen&&m.b.check," ","connecting"===t.dc.readyState?" ":t.dc.readyState]}),this.state.showDetails&&!n&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("textarea",{onFocus:function(t){r&&(t.target.select(),document.execCommand("copy"),Object(f.a)(Object(g.jsx)("div",{className:"brandcolor",style:{fontSize:"20pt"},children:"Copied Key to clipboard"})),console.debug("Add copied message",e.state.manualMsgs),e.forceUpdate())},placeholder:"paste their key",style:{width:"100%"},rows:2,value:t.hostOffer,onChange:function(e){r||(t.hostOffer=e.target.value)},readOnly:r}),r&&t.hostOffer&&Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsx)("button",{onClick:function(){navigator.clipboard.writeText(o).then((function(){console.log("Async: Copying to clipboard was successful!"),Object(f.a)(Object(g.jsx)("div",{className:"brandcolor",style:{fontSize:"20pt"},children:"Copied Link"}))}),(function(e){console.error("Async: Could not copy text: ",e),Object(f.a)(Object(g.jsx)("div",{className:"bad",style:{fontSize:"20pt"},children:"Failed to copy link"}))}))},children:"Copy Link"})]}),Object(g.jsx)(p.a,{style:{margin:10},onClick:function(){e.setState(Object(s.a)(Object(s.a)({},e.state),{},{hasPeerOffer:!0})),r||(t.hostOffer?t.acceptHostOffer(t.hostOffer):alert("Paste their key in the textbox"))},title:"Next"}),this.state.hasPeerOffer&&(t.peerOffer||r)&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("caption",{children:r?"Their key":"My Key"}),Object(g.jsx)("textarea",{placeholder:"paste their key",style:{width:"100%"},rows:2,value:t.peerOffer,onFocus:function(t){r||(t.target.select(),document.execCommand("copy"),Object(f.a)(Object(g.jsx)("div",{className:"brandcolor",style:{fontSize:"20pt"},children:"Copied Key to clipboard"})),console.debug("Add copied message",e.state.manualMsgs),e.forceUpdate())},readOnly:!r,onChange:function(n){r&&(t.peerOffer=n.target.value,e.forceUpdate())}}),!r&&t.peerOffer&&Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsx)("button",{onClick:function(){navigator.clipboard.writeText(o).then((function(){console.log("Async: Copying to clipboard was successful!"),Object(f.a)(Object(g.jsx)("div",{className:"brandcolor",style:{fontSize:"20pt"},children:"Copied Link"}))}),(function(e){console.error("Async: Could not copy text: ",e),Object(f.a)(Object(g.jsx)("div",{className:"bad",style:{fontSize:"20pt"},children:"Failed to copy link"}))}))},children:"Copy Link"})]}),r&&Object(g.jsx)(p.a,{disabled:!t.peerOffer,style:{margin:10},title:"Connect",onClick:function(){r?t.acceptPeerOffer(t.peerOffer):t.acceptHostOffer(t.peerOffer)}})]})]})]}),Object(g.jsx)("div",{style:{alignSelf:"stretch",maxHeight:"calc(100vh - 40px)",overflowY:"auto",marginLeft:12},children:t.allMessages.slice(0,100).map((function(e,t){return Object(g.jsxs)("div",{style:{color:e.sentFromHere?"purple":"indianred",padding:4},children:[t,": ",e.msg]},"".concat(e,"_").concat(t))}))})]})}}]),n}(h.Component)}).call(this,n(47).Buffer)},17:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(6),s={page:"#ffffff",paper:"#f2f2f2",text:"#000000",gray:{darker:"#676767",lighter:"#878787",lightest:"#acacac"},link:"#1e90ff",good:"#008b8b",bad:"#ff0000"},i={check:"\u2713",plus:"+"};function a(e,t){var n=t||s,i=e&&"".concat(e,"-")||"";return Object.keys(n).reduce((function(e,t){var s=n[t];return s&&("object"===typeof s?e=Object(r.a)(Object(r.a)({},e),a(t,s)):e["".concat(i).concat(t)]=s),e}),{})}function o(){var e=a();console.debug("Applying theming",e),Object.keys(e).forEach((function(t){window.document.body.style.setProperty("--".concat(t),e[t])}))}},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));n(5);var r=n(20),s=n(0);function i(e){var t=e.icon&&"string"===typeof e.icon&&e.icon||void 0;return Object(s.jsxs)(s.Fragment,{children:[t&&Object(s.jsx)("div",{onClick:e.onClick,className:"cellcc ".concat(e.onClick?"clickable":""),style:{width:50,fontWeight:"bold",height:50,borderRadius:"100%"},children:e.icon}),!t&&e.icon]})}function a(e){return Object(s.jsxs)("h1",{onClick:e.onClick,className:"celllc wrap childmargin ".concat(e.onClick?"clickable":""),children:[e.expanded&&Object(s.jsx)(r.b,{expanded:e.expanded}),e.icon&&Object(s.jsx)(i,{icon:e.icon}),Object(s.jsxs)("div",{className:"cellvl",children:[Object(s.jsxs)("span",{style:{fontSize:"0.7em",color:"#00000099"},children:[" ",e.top," "]}),"  ",e.bottom]}),Object(s.jsx)("div",{style:{marginLeft:"auto"}}),e.right]})}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(30),s=(n(5),n(18)),i=n(0);function a(e){return Object(i.jsx)("button",{onClick:e.onClick,style:e.style,children:e.title})}function o(e){var t=Object(r.a)(e.expanded,2),n=t[0],a=t[1];return Object(i.jsx)(s.a,{icon:n?"-":"+",onClick:function(){a(!n)}})}},36:function(e,t,n){},37:function(e,t,n){},41:function(e,t){},51:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(5),s=n.n(r),i=n(29),a=n.n(i),o=(n(36),n(2)),c=n(4),u=n(8),d=n(7),l=(n(37),n(24)),h=function(){function e(t){var n=this;Object(o.a)(this,e),this.lastPhraseStart=void 0,this.lastChar=void 0,this.timer=void 0,this.keys=[],this.onphrase=void 0,this.output="",window.addEventListener("keypress",(function(e){n.onkey(e)})),this.onphrase=t}return Object(c.a)(e,[{key:"onkey",value:function(e){var t=this;this.timer&&(window.clearTimeout(this.timer),this.timer=void 0);var n=400;this.keys&&this.keys.length>0&&this.keys.length>=5&&(n=250),this.timer||(this.timer=window.setTimeout((function(){t.lastChar=void 0,t.lastPhraseStart=void 0,t.output=String.fromCharCode.apply(String,Object(l.a)(t.keys)).toUpperCase(),t.output=t.output.trim(),console.log(t.output),t.onphrase(t.output),t.timer=void 0}),n)),this.lastChar=new Date,this.lastPhraseStart||(this.lastPhraseStart=new Date,this.output="",this.keys=[]),this.keys.push(e.which)}}]),e}(),p=n(10),f=n(13),m=n(11),g=n(6),v=n(1),b=n.n(v),w=n(3),O=n(27),j=n(56),y="BC-xtSqetDdbG6QjnUXJbHFQiLAEXLbW9b5JrLcm-km6hCWBe7_JklM8W-PRPq-j5ItxvRi-y0JsbHjHqUWhnMQ",x="OSgR_TWtcONXtsa9GpB1q4c3D57eaPKFIRa3OZpK3PI";function k(e,t){return D.apply(this,arguments)}function D(){return(D=Object(w.a)(b.a.mark((function e(t,n){var r,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=window.WebPushLib).setVapidDetails("mailto:tinus@coza.us",y,x),s={TTL:60},e.next=6,r.sendNotification(t,n,s);case 6:if(410==(i=e.sent).statusCode){e.next=12;break}return console.log("Weboush success !!",{status:i.statusCode,body:i.body}),e.abrupt("return",Promise.resolve({}));case 12:return console.error("Failure sending notification "+i.statusCode,i.body),t.mTs=(new Date).getTime(),t.err=i.body||i.statusCode.toString(),"socket hang up"==t.err&&(t.err=""),e.abrupt("return",Promise.resolve({err:i.body||i.statusCode.toString()}));case 17:e.next=27;break;case 19:if(e.prev=19,e.t0=e.catch(0),console.error("SendNotification!!!ERROR",e.t0),410!=e.t0.statusCode){e.next=26;break}return t.mTs=(new Date).getTime(),t.err=e.t0.body||e.t0.message||"410 expired",e.abrupt("return",Promise.resolve({err:t.err}));case 26:return e.abrupt("return",Promise.resolve({err:"Error caught"}));case 27:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}var P=new(function(){function e(){var t=this;Object(o.a)(this,e),this.deviceDB=new O.a("me",{}),this.endPointsLogDB=new O.a("endpoints"),this.pushEndpointChanges=[],this.endpointsLog=new m.a(Object(w.a)(b.a.mark((function e(){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.endPointsLogDB.allDocs({descending:!0,limit:10,include_docs:!0});case 2:return(null===(n=e.sent)||void 0===n?void 0:n.rows)&&(t.pushEndpointChanges.splice(0),(r=t.pushEndpointChanges).push.apply(r,Object(l.a)(n.rows.map((function(e){return e.doc}))))),e.abrupt("return",Promise.resolve(n.rows.filter((function(e){return e.doc})).map((function(e){return e.doc}))));case 5:case"end":return e.stop()}}),e)}))),"endPointsLog"),this.info=new m.a(Object(w.a)(b.a.mark((function e(){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.deviceDB.get("me",{latest:!0});case 3:if(n=e.sent){e.next=11;break}return n={_id:"me",deviceId:Object(j.a)()},e.next=8,t.deviceDB.put(n);case 8:return e.next=10,t.deviceDB.get("me");case 10:n=e.sent;case 11:return e.abrupt("return",Promise.resolve(n));case 14:if(e.prev=14,e.t0=e.catch(0),404!=e.t0.status){e.next=25;break}return console.debug("insert newest one!!"),r={_id:"me",deviceId:Object(j.a)()},e.next=21,t.deviceDB.put(r);case 21:return e.next=23,t.deviceDB.get("me");case 23:r=e.sent,t.info.reset();case 25:return e.abrupt("return",Promise.reject(e.t0));case 26:case"end":return e.stop()}}),e,null,[[0,14]])}))),"pouch/me/me")}return Object(c.a)(e,[{key:"onPushEndpointVerified",value:function(){var e=Object(w.a)(b.a.mark((function e(t){var n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.info.waitForRes();case 2:return n=e.sent,e.next=5,this.endpointsLog.waitForRes();case 5:if(r=e.sent,n.pushEndpoint&&n.pushEndpoint.endpoint===t.endpoint&&0!=r.length){e.next=16;break}return s=Object(g.a)({_id:(new Date).getTime().toString()},t),this.pushEndpointChanges.push(s),e.next=11,this.endPointsLogDB.put(s);case 11:return this.endpointsLog.reset(),n.pushEndpoint=t,e.next=15,this.deviceDB.put(n);case 15:this.info.reset();case 16:return k(n.pushEndpoint,JSON.stringify({title:"Welcome",desc:"Just checking your new hyper address"})),e.abrupt("return",Promise.resolve(t));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),T=n(15);function S(e){return[e.appName,e.streamDescriptor,e.partnerDeviceIdent].filter((function(e){return!!e})).join("/")}var C=function e(t,n){Object(o.a)(this,e),this.descriptor=t,this.id=void 0,this.peers=void 0,this.showDetails=void 0,this.showDetails=!0,this.id=S(t),this.peers=n},A=new(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this,(function(e){return S(e.descriptor)}))).newPartner=void 0,e.newHost=void 0,e.newPartner=new T.b("",!1,"",(function(t){e.onConnectionChanged(e.newPartner,t)})),e.newHost=new T.b("",!0,"",(function(t){e.onConnectionChanged(e.newHost,t)})),e}return Object(c.a)(n,[{key:"requestNewTunnel",value:function(e,t,n,r){var s={appName:t,hostKeyHash:n,partnerDeviceIdent:"",streamDescriptor:"".concat(e,"_").concat(this.items.length),title:r};S(s);return this.addOrUpdateItem(new C(s,[]))}},{key:"onConnectionChanged",value:function(e,t){var n=this;if(((null===t||void 0===t?void 0:t.indexOf(T.c.connected))||-1)>=0){if(e===this.newHost){var r=this.items.find((function(t){return t.r.peers.find((function(t){return t.hostOffer===e.hostOffer}))}));if(r)r.r.peers.push(e);else this.requestNewTunnel("Hosted","topointB","","").peers.push(e);this.newHost=new T.b("",!0,"",(function(e){n.onConnectionChanged(n.newHost,e)}))}else if(e===this.newPartner){var s=this.items.find((function(t){return t.r.peers.find((function(t){return t.hostOffer===e.hostOffer}))}));if(s)s.r.peers.push(e);else this.requestNewTunnel("Joined","topointB","","").peers.push(e);this.newPartner=new T.b("",!1,"",(function(e){n.onConnectionChanged(n.newPartner,e)}))}p.a.stateChangedGlobalDebouncedViewUpdate()}}}]),n}(m.c)),N=n(18),M=n(17),I=n(16),F=n.n(I),W=function(){function e(){Object(o.a)(this,e),this.auditMsgsPerTimeStamp={},this.auditMsgsFlatPerTieStamp={},this.moments={}}return Object(c.a)(e,[{key:"AppendAuditMsg",value:function(e,t,n){for(var r={msg:e,ts:(new Date).getTime(),class:""};this.auditMsgsFlatPerTieStamp[r.ts];)r.ts++;return n&&(r.extra=n),this.auditMsgsPerTimeStamp[r.ts]=r,this.auditMsgsFlatPerTieStamp[r.ts]=r,r}},{key:"AppendPromiseWithDurationTrail",value:function(e,t,n,r){console.debug("AppendPromiseWithDurationTrail msg:: "+t);for(var s={msg:t,ts:(new Date).getTime(),class:n};this.auditMsgsFlatPerTieStamp[s.ts];)s.ts++;var i=e||s.ts;if(r&&(s.extra=r),this.auditMsgsFlatPerTieStamp[i]){var a=this.auditMsgsFlatPerTieStamp[i];if(s.ts==a.ts)return a.sametime||(a.sametime=[]),a.sametime.push(s.msg),Object(g.a)({startTs:a.ts},a);a.msgs||(a.msgs={}),a.msgs[s.ts]=s,a.dur_ms=s.ts-a.ts,a.class=s.class}else this.auditMsgsPerTimeStamp[i]=s;return this.auditMsgsFlatPerTieStamp[s.ts]=s,Object(g.a)({startTs:i},s)}},{key:"getMoment",value:function(e){var t=this.moments[e];return t||(t=F()(e),this.moments[e]=t),t}},{key:"CommitDuration",value:function(e){var t=(new Date).getTime();for(e.msgs||(e.msgs={}),e.dur_ms=t-e.ts;e.msgs[t];)t++;e.msgs[t]={class:"",dur_ms:e.dur_ms,msg:"Done",ts:t}}},{key:"AppendAndCommitPromiseWithDurationTrail",value:function(e,t,n,r){for(var s={msg:t,ts:(new Date).getTime(),class:n};this.auditMsgsFlatPerTieStamp[s.ts];)s.ts++;var i=e||s.ts;if(r&&(s.extra=r),this.auditMsgsFlatPerTieStamp[i]){var a=this.auditMsgsFlatPerTieStamp[i];if(s.ts==a.ts)return a.sametime||(a.sametime=[]),a.sametime.push(s.msg),Object(g.a)({startTs:a.ts},a);a.msgs||(a.msgs={}),a.msgs[s.ts]=s,a.dur_ms=s.ts-a.ts,a.class=s.class}else this.auditMsgsPerTimeStamp[i]=s,s.dur_ms=(new Date).getTime()-s.ts;return this.auditMsgsFlatPerTieStamp[s.ts]=s,Object(g.a)({startTs:i},s)}}]),e}(),R=(new W,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this,(function(e){return e.valueOf()}))).toDateString=function(t){return e.getOrAddItem(t,(function(){return F()(t)})).format(U.dateFormat)},e.toDateTimeString=function(t){return e.getOrAddItem(t,(function(){return F()(t)})).format(U.dateTimeFormat)},e.fromNowTimeString=function(t,n){return e.getOrAddItem(t,(function(){return F()(t)})).fromNow(n)},e}return n}(m.d)),H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this,(function(e){return e.dt}))).toDateString=function(t){return e.getOrAddItem(t,(function(){return{dt:t,m:F()(t)}})).m.format(U.dateFormat)},e.toDateTimeString=function(t){return e.getOrAddItem(t,(function(){return{dt:t,m:F()(t)}})).m.format(U.dateTimeFormat)},e.fromNowTimeString=function(t,n){return e.getOrAddItem(t,(function(){return{dt:t,m:F()(t)}})).m.fromNow(n)},e}return n}(m.c),U={dateFormat:"YYYY-MM-DD",dateTimeFormat:"YYYY-MM-DD HH:mm:ss",dateTimeFormatNoSeconds:"YYYY-MM-DD HH:mm",moments:new R,momentStringDates:new H},E=n(0);function L(e){return K.apply(this,arguments)}function K(){return(K=Object(w.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=V.AppendPromiseWithDurationTrail(t.ts,"Waiting for service worker","api"),r=0;case 2:if(q.swRegistration||!(r<5)){e.next=8;break}return e.next=5,new Promise((function(e){setTimeout((function(){e(!0)}),2e3)}));case 5:r++,e.next=2;break;case 8:return V.AppendAndCommitPromiseWithDurationTrail(n.ts,"Done waiting for service worker","api"),e.abrupt("return",Promise.resolve(!!q.swRegistration));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=new W,B={perm:"default",endPoint:void 0,oldEndpoints:[],disabledByUser:void 0,hasPushSupport:void 0};function _(){return(_=Object(w.a)(b.a.mark((function e(t,n){var r,s,i,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=V.AppendPromiseWithDurationTrail(n&&n.ts||0,t,"api"),e.next=3,L(r);case 3:if(q.swRegistration){e.next=6;break}return V.AppendAndCommitPromiseWithDurationTrail(r.ts,"No service worker","err"),e.abrupt("return",Promise.reject("No service worker"));case 6:return e.next=8,P.info.waitForRes();case 8:if(e.sent,!Notification){e.next=42;break}return e.prev=10,console.log("Notification.requestPermission()     ------------------    pending now.."),e.next=14,Notification.requestPermission();case 14:if(s=e.sent,B.perm=s,"granted"!=s){e.next=31;break}return e.next=19,Y(n);case 19:if(i=e.sent,a=V.AppendPromiseWithDurationTrail(r.ts,"SubscribeForWebPushEndpoint from Init proc","api",i),!i){e.next=27;break}return console.debug("Got push endpoint!!!",i),e.next=25,P.onPushEndpointVerified(i);case 25:B.endPoint=i,V.AppendPromiseWithDurationTrail(a.ts,"SendEndpointToServer Init proc","api",i);case 27:return V.AppendAndCommitPromiseWithDurationTrail(r.ts,"InitPushSystem subscribed and done","api",s),e.abrupt("return",Promise.resolve(i));case 31:return V.AppendAndCommitPromiseWithDurationTrail(r.ts,"PushnotificationnotGranted!!!","err",s),e.abrupt("return",Promise.reject("Push notifications not granted"));case 33:e.next=40;break;case 35:return e.prev=35,e.t0=e.catch(10),V.AppendAndCommitPromiseWithDurationTrail(r.ts,"Push systeminit error!!","err",e.t0),console.error("Push systeminit error!!",e.t0),e.abrupt("return",Promise.reject(e.t0));case 40:e.next=44;break;case 42:return V.AppendAndCommitPromiseWithDurationTrail(r.ts,"Notification OBJNULL","err"),e.abrupt("return",Promise.reject("Notification OBJNULL"));case 44:case"end":return e.stop()}}),e,null,[[10,35]])})))).apply(this,arguments)}function J(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}function Y(e){return G.apply(this,arguments)}function G(){return(G=Object(w.a)(b.a.mark((function e(t){var n,r,s,i,a,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=q.swRegistration){e.next=3;break}return e.abrupt("return",Promise.reject("No serviceworker registration found"));case 3:return r=V.AppendPromiseWithDurationTrail(t&&t.ts||0,"SubscribeForWebPushEndpoint call","api"),t||(t=r),e.next=7,P.info.waitForRes();case 7:if(s=e.sent,!n.pushManager){e.next=25;break}return B.hasPushSupport=!0,p.a.stateChangedGlobalDebouncedViewUpdate(),e.next=13,n.pushManager.subscribe({applicationServerKey:J(y),userVisibleOnly:!0});case 13:if(!(i=e.sent)){e.next=21;break}return a=i.toJSON(),o={endpoint:a.endpoint,agent:window&&window.navigator&&window.navigator.userAgent||"unknown",cientId:s.deviceId,expirationTime:a.expirationTime,keys:a.keys,ts:(new Date).getTime()},V.AppendAndCommitPromiseWithDurationTrail(r.ts,"pushManager.subscribe done","api",{endpoint:o,isSameAsLast:o.endpoint==B.oldEndpoints[0]?"Yes":"No"}),e.abrupt("return",Promise.resolve(o));case 21:return V.AppendAndCommitPromiseWithDurationTrail(r.ts,"No push subscription returned","err"),e.abrupt("return",Promise.reject("No push subscription returned"));case 23:e.next=27;break;case 25:return V.AppendAndCommitPromiseWithDurationTrail(r.ts,"No pushManager on serviceworkerRegistration","err"),e.abrupt("return",Promise.reject("No pushManager on serviceworkerRegistration"));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={swRegistration:void 0,pushMsgs:[]},z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).showDevice=[!1,function(t){e.showDevice[0]=t,e.forceUpdate()}],e}return Object(c.a)(n,[{key:"render",value:function(){var e,t=P.info.res;return t&&Object(E.jsxs)(E.Fragment,{children:[" ",Object(E.jsx)(N.b,{expanded:this.showDevice,top:"Device Id",bottom:t.deviceId,right:Object(E.jsxs)(E.Fragment,{children:["      ",t.pushEndpoint&&Object(E.jsx)("div",{className:"good",children:"Hyper address Ok"})||Object(E.jsx)("div",{className:"bad",children:"Hyper address NOk"})]})}),this.showDevice[0]&&Object(E.jsx)("div",{className:"celllt paperback padded",style:{padding:10,minHeight:"200pt"},children:Object(E.jsxs)("div",{className:"cellvl",children:[!t.pushEndpoint&&Object(E.jsx)("div",{className:"padded bad",children:"Hyper Address cannot be established. Needs web push enabled"}),null===(e=P.endpointsLog.res)||void 0===e?void 0:e.map((function(e){return Object(E.jsx)("div",{className:"padded",children:U.moments.fromNowTimeString(Number(e._id))},null===e||void 0===e?void 0:e._id)})),q.pushMsgs.length>0&&Object(E.jsx)("h3",{children:"Web push signals"}),q.pushMsgs.map((function(e,t){return Object(E.jsxs)("div",{className:"padded",children:[U.moments.fromNowTimeString(e.timeStamp),"string"===typeof e.data&&e.data||"binary"]},t)})),Object(E.jsx)("div",{className:"padded",children:"Appversion 2"})]})})]})||Object(E.jsx)(E.Fragment,{})}}]),n}(s.a.Component),X=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).showAccept=[!1,function(t){e.showAccept[0]=t,e.forceUpdate()}],e.showNewTunnel=[!1,function(t){e.showNewTunnel[0]=t,e.forceUpdate()}],e.lastHostKeyInUrl=["",function(t){t&&(A.newPartner.hostOffer=t,A.newPartner.acceptHostOffer(t),e.lastHostKeyInUrl[0]=t,e.showAccept[1](!0))}],e.lastPartnerKeyInUrl=["",function(t){A.newHost.peerOffer=t,A.newHost.acceptPeerOffer(t),e.lastPartnerKeyInUrl[0]=t,e.showNewTunnel[1](!0)}],e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t="".concat(window.location.pathname).concat(window.location.search).concat(window.location.hash),n=Object(m.e)(t),r=(P.info.res,n.hash.name.startsWith("/host")&&n.hash.name.split("/host/")[1].split("/")[0]||""),i=n.hash.name.startsWith("/peer")&&n.hash.name.split("/peer/")[1].split("/")[0]||"";return this.lastHostKeyInUrl[0]!==r&&this.lastHostKeyInUrl[1](r),this.lastPartnerKeyInUrl[0]!==i&&this.lastPartnerKeyInUrl[1](i),Object(E.jsxs)("div",{className:"App",children:[[{name:"Accept tunnel",con:A.newPartner,showing:this.showAccept},{name:"Host new Tunnel",con:A.newHost,showing:this.showNewTunnel}].map((function(e){return Object(E.jsxs)(s.a.Fragment,{children:[Object(E.jsx)(N.b,{top:"fromPointA",icon:e.showing[0]&&M.b.check||M.b.plus,bottom:e.name,onClick:function(){e.showing[1](!e.showing[0])}}),e.showing[0]&&Object(E.jsx)("div",{className:"paperback celllt",children:Object(E.jsx)(T.a,{widgetsStyle:{flexDirection:"row",flexWrap:"wrap",maxWidth:"auto",flex:"1 1 auto",alignSelf:"flex-start",alignItems:"center"},peerSetup:e.con})})]},e.name)})),A.items.map((function(t){return Object(E.jsxs)(s.a.Fragment,{children:[Object(E.jsx)(N.b,{expanded:[t.r.showDetails,function(n){t.r.showDetails=n,e.forceUpdate()}],top:t.r.id,bottom:t.r.descriptor.title}),t.r.showDetails&&Object(E.jsx)("div",{className:"celllt paperback",style:{flex:"1 1 auto",padding:10,flexWrap:"wrap",alignSelf:"stretch",overflowX:"hidden",overflowY:"auto"},children:t.r.peers.map((function(e,t){return Object(E.jsx)(T.a,{peerSetup:e},t)}))})]},t.r.id)})),Object(E.jsx)(z,{})]})}}]),n}(s.a.Component),Q=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).scannerKeyHandler=new h((function(e){console.debug("scannerphrase",e),r.forceUpdate()})),setInterval((function(){r.forceUpdate()}),1e3),window.addEventListener("message",(function(e){p.a.onWindowMessage(e)})),p.a.sendWindowMessage=function(e,t){window.postMessage(t,e)},r}return Object(c.a)(n,[{key:"render",value:function(){return Object(E.jsx)(f.b,{children:Object(E.jsx)(X,{})})}}]),n}(s.a.Component),Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(e,t){navigator.serviceWorker.register(e).then((function(e){q.swRegistration=e;var n={ts:(new Date).getTime(),msg:"Registration done",class:"api"};console.debug("RegistedServiceWorker, init push",n),setTimeout((function(){return function(e,t){return _.apply(this,arguments)}("registration done",n)}),2e3),navigator.serviceWorker.onmessage=ee,e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function ee(e){if(e&&e.data){if(console.log("Received service worker event!!",e.data),"string"==typeof e.data)try{JSON.parse(e.data).navigate}catch(t){console.error("messageFromServiceWorker parseJSON error",t)}q.pushMsgs.push(e),p.a.stateChangedGlobalDebouncedViewUpdate()}}var te,ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),i(e),a(e)}))};a.a.render(Object(E.jsx)(s.a.StrictMode,{children:Object(E.jsx)(Q,{})}),document.getElementById("root")),te={onUpdate:function(e){Object(f.a)(Object(E.jsx)("div",{className:"bad",children:"App updated reload for latest version"}),5e3)},onSuccess:function(e){console.debug("Service worker registration completed")}},navigator,new URL("",window.location.href).origin,window.location.origin,window.addEventListener("load",(function(){var e="service-worker.js";Z?function(e,t){console.debug("checkValidServiceWorker"),fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");console.debug("checkValidServiceWorker fetched ",{swUrl:e},n.status,r),404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):(console.debug("checkValidServiceWorker: DEV service worker found..!",{swUrl:e,config:t}),$(e,t))})).catch((function(){console.log("checkValidServiceWorker:: No internet connection found. App is running in offline mode.")}))}(e,te):$(e,te),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service ")}))})),ne()}},[[53,1,2]]]);
//# sourceMappingURL=main.db74e6d1.chunk.js.map